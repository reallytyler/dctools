<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiscordTools - Advanced Discord Lookup Tools</title>
    <link rel="icon" href="https://discordlookup.com/images/branding/favicon/favicon.svg">
    <style>
        @import url('https://fonts.cdnfonts.com/css/gg-sans-2');

        :root {
            --bg-primary: #36393f;
            --bg-secondary: #2f3136;
            --bg-tertiary: #202225;
            --bg-accent: #40444b;
            --text-normal: #dcddde;
            --text-muted: #72767d;
            --text-link: #00aff4;
            --brand: #5865f2;
            --brand-hover: #4752c4;
            --green: #3ba55c;
            --red: #ed4245;
            --yellow: #faa81a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'gg sans', 'Whitney', sans-serif;
            background: var(--bg-primary);
            color: var(--text-normal);
            line-height: 1.6;
        }

        .navbar {
            background: var(--bg-secondary);
            padding: 1rem 2rem;
            border-bottom: 1px solid var(--bg-accent);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.5rem;
        }

        .logo-gradient {
            background: linear-gradient(90deg, #5865f2, #eb459e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: var(--text-muted);
            text-decoration: none;
            transition: color 0.2s;
            font-weight: 500;
        }

        .nav-link:hover, .nav-link.active {
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .hero {
            text-align: center;
            padding: 4rem 0;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(90deg, #5865f2, #eb459e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--text-muted);
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 3rem 0;
        }

        .tool-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid var(--bg-accent);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            border-color: var(--brand);
        }

        .tool-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .tool-card h3 {
            color: white;
            margin-bottom: 0.5rem;
        }

        .tool-card p {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .search-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 3rem;
            margin: 2rem 0;
            text-align: center;
        }

        .search-title {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: white;
        }

        .search-box {
            display: flex;
            gap: 1rem;
            max-width: 500px;
            margin: 0 auto;
        }

        .search-input {
            flex: 1;
            padding: 1rem;
            border: 2px solid var(--bg-accent);
            border-radius: 8px;
            background: var(--bg-primary);
            color: var(--text-normal);
            font-size: 1rem;
            outline: none;
        }

        .search-input:focus {
            border-color: var(--brand);
        }

        .search-btn {
            padding: 1rem 2rem;
            background: var(--brand);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .search-btn:hover {
            background: var(--brand-hover);
        }

        .examples {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .example-btn {
            padding: 0.5rem 1rem;
            background: var(--bg-accent);
            color: var(--text-muted);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .example-btn:hover {
            background: var(--brand);
            color: white;
        }

        .result-container {
            display: none;
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid var(--bg-accent);
        }

        .user-header {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--bg-accent);
        }

        .avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 4px solid var(--brand);
        }

        .avatar-placeholder {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--brand);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: bold;
        }

        .user-info h2 {
            color: white;
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .badges {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .badge {
            background: var(--brand);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .detail-card {
            background: var(--bg-accent);
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid var(--brand);
        }

        .detail-label {
            color: var(--text-muted);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        .detail-value {
            color: white;
            font-weight: 600;
        }

        .loading {
            text-align: center;
            padding: 3rem;
            color: var(--brand);
        }

        .error {
            background: var(--red);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .footer {
            text-align: center;
            padding: 3rem 0;
            color: var(--text-muted);
            border-top: 1px solid var(--bg-accent);
            margin-top: 4rem;
        }

        .stats {
            display: flex;
            gap: 3rem;
            justify-content: center;
            margin: 2rem 0;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--brand);
            display: block;
        }

        /* Tool-specific styles */
        .tool-section {
            display: none;
        }

        .tool-section.active {
            display: block;
        }

        .snowflake-input {
            width: 100%;
            max-width: 400px;
            padding: 1rem;
            border: 2px solid var(--bg-accent);
            border-radius: 8px;
            background: var(--bg-primary);
            color: var(--text-normal);
            font-size: 1rem;
            margin: 1rem 0;
        }

        .timestamp-styles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .timestamp-example {
            background: var(--bg-accent);
            padding: 1rem;
            border-radius: 8px;
            font-family: monospace;
        }

        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .search-box {
                flex-direction: column;
            }

            .user-header {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <a href="#" class="logo">
            <span class="logo-gradient">DiscordTools</span>
        </a>
        <div class="nav-links">
            <a href="#" class="nav-link active" data-tool="user-lookup">User Lookup</a>
            <a href="#" class="nav-link" data-tool="snowflake">Snowflake Decoder</a>
            <a href="#" class="nav-link" data-tool="timestamp">Timestamps</a>
            <a href="#" class="nav-link" data-tool="permissions">Permissions</a>
            <a href="https://discord.gg/EsznpytuYT" class="nav-link">Discord</a>
        </div>
    </nav>

    <div class="container">
        <div class="hero">
            <h1>DiscordTools</h1>
            <p>Advanced tools for Discord power users. Look up users, decode snowflakes, calculate permissions, and more.</p>
        </div>

        <!-- User Lookup Tool -->
        <div class="tool-section active" id="user-lookup">
            <div class="search-section">
                <h2 class="search-title">User Lookup</h2>
                <p>Enter a Discord User ID to get detailed information</p>
                <div class="search-box">
                    <input type="text" class="search-input" id="userIdInput" placeholder="Enter User ID (e.g., 1186216678732861531)">
                    <button class="search-btn" id="lookupButton">Lookup</button>
                </div>
                <div class="examples">
                    <button class="example-btn" data-id="1186216678732861531">reallytyler</button>
                    <button class="example-btn" data-id="190916143439413248">Discord Test</button>
                    <button class="example-btn" data-id="80351110224678912">Danny</button>
                </div>
            </div>

            <div class="result-container" id="result">
                <!-- Results will be populated here -->
            </div>
        </div>

        <!-- Snowflake Decoder Tool -->
        <div class="tool-section" id="snowflake">
            <div class="search-section">
                <h2 class="search-title">Snowflake Decoder</h2>
                <p>Decode Discord snowflakes to get creation time and other information</p>
                <input type="text" class="snowflake-input" id="snowflakeInput" placeholder="Enter Snowflake ID">
                <button class="search-btn" id="decodeSnowflake">Decode</button>
            </div>
            <div class="result-container" id="snowflakeResult"></div>
        </div>

        <!-- Timestamp Generator Tool -->
        <div class="tool-section" id="timestamp">
            <div class="search-section">
                <h2 class="search-title">Discord Timestamps</h2>
                <p>Generate Discord formatted timestamps</p>
                <input type="datetime-local" class="snowflake-input" id="timestampInput">
                <button class="search-btn" id="generateTimestamp">Generate</button>
            </div>
            <div class="timestamp-styles" id="timestampResults"></div>
        </div>

        <!-- Permissions Calculator Tool -->
        <div class="tool-section" id="permissions">
            <div class="search-section">
                <h2 class="search-title">Permissions Calculator</h2>
                <p>Calculate and decode Discord permission integers</p>
                <input type="text" class="snowflake-input" id="permissionsInput" placeholder="Enter permission integer">
                <button class="search-btn" id="calculatePermissions">Calculate</button>
            </div>
            <div class="result-container" id="permissionsResult"></div>
        </div>

        <!-- Tools Grid -->
        <div class="tools-grid">
            <div class="tool-card" data-tool="user-lookup">
                <div class="tool-icon">👤</div>
                <h3>User Lookup</h3>
                <p>Get detailed information about any Discord user by their ID</p>
            </div>
            <div class="tool-card" data-tool="snowflake">
                <div class="tool-icon">❄️</div>
                <h3>Snowflake Decoder</h3>
                <p>Decode Discord snowflake IDs to get creation dates and information</p>
            </div>
            <div class="tool-card" data-tool="timestamp">
                <div class="tool-icon">⏰</div>
                <h3>Timestamp Styles</h3>
                <p>Generate Discord formatted timestamps with different styles</p>
            </div>
            <div class="tool-card" data-tool="permissions">
                <div class="tool-icon">🔐</div>
                <h3>Permissions Calculator</h3>
                <p>Calculate and understand Discord permission integers</p>
            </div>
        </div>

        <div class="stats">
            <div class="stat">
                <span class="stat-number" id="totalLookups">0</span>
                <span>Total Lookups</span>
            </div>
            <div class="stat">
                <span class="stat-number" id="toolsCount">4</span>
                <span>Tools Available</span>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>DiscordTools is not affiliated with Discord Inc. &copy; 2025</p>
        <p>Licensed under <a href="https://github.com/reallytyler/dctools/blob/main/LICENSE" style="color: var(--text-link);">MIT License</a></p>
        <p><a href="https://discord.gg/EsznpytuYT" style="color: var(--text-link);">Join our Discord</a></p>
    </footer>

    <script>
        class DiscordTools {
            constructor() {
                this.API_BASE = 'https://discord-lookup.deno.dev';
                this.totalLookups = parseInt(localStorage.getItem('totalLookups') || '0');
                this.currentTool = 'user-lookup';
                
                this.initialize();
            }

            initialize() {
                this.bindEvents();
                this.updateStats();
            }

            bindEvents() {
                // Navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.switchTool(link.getAttribute('data-tool'));
                    });
                });

                // Tool cards
                document.querySelectorAll('.tool-card').forEach(card => {
                    card.addEventListener('click', () => {
                        this.switchTool(card.getAttribute('data-tool'));
                    });
                });

                // User lookup
                document.getElementById('lookupButton').addEventListener('click', () => this.performUserLookup());
                document.getElementById('userIdInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.performUserLookup();
                });

                // Example buttons
                document.querySelectorAll('.example-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const userId = btn.getAttribute('data-id');
                        document.getElementById('userIdInput').value = userId;
                        this.performUserLookup(userId);
                    });
                });

                // Snowflake decoder
                document.getElementById('decodeSnowflake').addEventListener('click', () => this.decodeSnowflake());

                // Timestamp generator
                document.getElementById('generateTimestamp').addEventListener('click', () => this.generateTimestamps());

                // Permissions calculator
                document.getElementById('calculatePermissions').addEventListener('click', () => this.calculatePermissions());
            }

            switchTool(tool) {
                // Update navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                document.querySelector(`[data-tool="${tool}"]`).classList.add('active');

                // Show/hide tool sections
                document.querySelectorAll('.tool-section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(tool).classList.add('active');

                this.currentTool = tool;
            }

            async performUserLookup(userId = null) {
                const inputId = userId || document.getElementById('userIdInput').value.trim();
                
                if (!this.validateUserId(inputId)) return;

                this.showLoading('user');
                this.totalLookups++;
                localStorage.setItem('totalLookups', this.totalLookups.toString());
                this.updateStats();

                try {
                    const data = await this.fetchUserData(inputId);
                    this.displayUserData(inputId, data);
                } catch (error) {
                    this.showError('user', error.message);
                }
            }

            validateUserId(userId) {
                if (!userId) {
                    this.showError('user', 'Please enter a User ID');
                    return false;
                }

                if (!/^\d{17,20}$/.test(userId)) {
                    this.showError('user', 'User ID must be 17-20 digits');
                    return false;
                }

                return true;
            }

            async fetchUserData(userId) {
                const response = await fetch(`${this.API_BASE}/${userId}`);
                
                if (!response.ok) {
                    throw new Error('User not found or API error');
                }
                
                const data = await response.json();
                
                if (!data.id) {
                    throw new Error('Invalid user data received');
                }
                
                return data;
            }

            displayUserData(userId, data) {
                const resultDiv = document.getElementById('result');
                const avatarUrl = data.avatar ? `https://cdn.discordapp.com/avatars/${userId}/${data.avatar}.png?size=512` : null;
                const accentColor = data.accent_color ? `#${data.accent_color.toString(16).padStart(6, '0')}` : '#5865f2';
                const badges = this.getBadges(data.public_flags || data.flags);
                const creationDate = this.getCreationDate(data.id);

                resultDiv.innerHTML = `
                    <div class="user-header">
                        ${avatarUrl ? 
                            `<img src="${avatarUrl}" alt="Avatar" class="avatar">` :
                            `<div class="avatar-placeholder">${data.username?.charAt(0)?.toUpperCase() || '?'}</div>`
                        }
                        <div class="user-info">
                            <h2>
                                ${this.escapeHtml(data.username || 'Unknown User')}
                                <span style="color: var(--text-muted);">
                                    ${data.discriminator && data.discriminator !== '0' ? `#${data.discriminator}` : ''}
                                </span>
                            </h2>
                            ${data.global_name && data.global_name !== data.username ? 
                                `<p style="color: var(--text-muted);">${this.escapeHtml(data.global_name)}</p>` : ''
                            }
                            ${badges.length > 0 ? `
                                <div class="badges">
                                    ${badges.map(badge => `<div class="badge">${this.escapeHtml(badge)}</div>`).join('')}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                    <div class="details-grid">
                        <div class="detail-card">
                            <div class="detail-label">User ID</div>
                            <div class="detail-value">${data.id}</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-label">Account Created</div>
                            <div class="detail-value">${creationDate}</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-label">Accent Color</div>
                            <div class="detail-value">${accentColor}</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-label">Public Flags</div>
                            <div class="detail-value">${data.public_flags || data.flags || 0}</div>
                        </div>
                        ${data.banner_color ? `
                        <div class="detail-card">
                            <div class="detail-label">Banner Color</div>
                            <div class="detail-value">${data.banner_color}</div>
                        </div>
                        ` : ''}
                    </div>
                `;
                resultDiv.style.display = 'block';
            }

            decodeSnowflake() {
                const snowflake = document.getElementById('snowflakeInput').value.trim();
                const resultDiv = document.getElementById('snowflakeResult');
                
                if (!snowflake || !/^\d+$/.test(snowflake)) {
                    resultDiv.innerHTML = '<div class="error">Please enter a valid snowflake ID</div>';
                    resultDiv.style.display = 'block';
                    return;
                }

                const timestamp = this.getCreationDate(snowflake);
                const binary = BigInt(snowflake).toString(2).padStart(64, '0');
                
                resultDiv.innerHTML = `
                    <div class="details-grid">
                        <div class="detail-card">
                            <div class="detail-label">Creation Date</div>
                            <div class="detail-value">${timestamp}</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-label">Snowflake</div>
                            <div class="detail-value">${snowflake}</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-label">Binary</div>
                            <div class="detail-value" style="font-family: monospace; font-size: 0.8rem;">${binary}</div>
                        </div>
                    </div>
                `;
                resultDiv.style.display = 'block';
            }

            generateTimestamps() {
                const input = document.getElementById('timestampInput').value;
                const timestamp = input ? Math.floor(new Date(input).getTime() / 1000) : Math.floor(Date.now() / 1000);
                const styles = {
                    'Short Time': 't',
                    'Long Time': 'T',
                    'Short Date': 'd',
                    'Long Date': 'D',
                    'Short Date/Time': 'f',
                    'Long Date/Time': 'F',
                    'Relative Time': 'R'
                };

                let html = '';
                for (const [name, style] of Object.entries(styles)) {
                    const code = `<t:${timestamp}:${style}>`;
                    html += `
                        <div class="timestamp-example">
                            <div class="detail-label">${name}</div>
                            <div class="detail-value">${code}</div>
                            <div style="color: var(--text-muted); font-size: 0.8rem;">Copy and paste into Discord</div>
                        </div>
                    `;
                }

                document.getElementById('timestampResults').innerHTML = html;
            }

            calculatePermissions() {
                const permInput = document.getElementById('permissionsInput').value.trim();
                const resultDiv = document.getElementById('permissionsResult');
                
                if (!permInput || !/^\d+$/.test(permInput)) {
                    resultDiv.innerHTML = '<div class="error">Please enter a valid permission integer</div>';
                    resultDiv.style.display = 'block';
                    return;
                }

                const permissions = this.decodePermissions(BigInt(permInput));
                
                resultDiv.innerHTML = `
                    <div class="details-grid">
                        <div class="detail-card">
                            <div class="detail-label">Permission Integer</div>
                            <div class="detail-value">${permInput}</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-label">Permissions</div>
                            <div class="detail-value">
                                ${permissions.length > 0 ? 
                                    permissions.map(p => `<div class="badge" style="margin: 0.2rem;">${p}</div>`).join('') :
                                    'No permissions'
                                }
                            </div>
                        </div>
                    </div>
                `;
                resultDiv.style.display = 'block';
            }

            // Utility methods
            getBadges(flags) {
                if (!flags) return [];
                
                const badgeMap = {
                    1: 'Staff', 2: 'Partner', 4: 'Hypesquad', 8: 'Bug Hunter L1',
                    64: 'HypeSquad Bravery', 128: 'HypeSquad Brilliance', 256: 'HypeSquad Balance',
                    512: 'Early Supporter', 1024: 'Team User', 16384: 'Bug Hunter L2',
                    65536: 'Verified Bot', 131072: 'Early Verified Bot Developer',
                    262144: 'Certified Moderator'
                };

                return Object.entries(badgeMap)
                    .filter(([flag]) => flags & parseInt(flag))
                    .map(([, name]) => name);
            }

            getCreationDate(snowflake) {
                const timestamp = (BigInt(snowflake) >> 22n) + 1420070400000n;
                return new Date(Number(timestamp)).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }

            decodePermissions(permissions) {
                const permMap = {
                    1n << 0n: 'Create Invite',
                    1n << 1n: 'Kick Members',
                    1n << 2n: 'Ban Members',
                    1n << 3n: 'Administrator',
                    1n << 4n: 'Manage Channels',
                    1n << 5n: 'Manage Guild',
                    1n << 6n: 'Add Reactions',
                    // Add more permissions as needed
                };

                return Object.entries(permMap)
                    .filter(([flag]) => permissions & BigInt(flag))
                    .map(([, name]) => name);
            }

            escapeHtml(text) {
                return text?.replace(/[&<>"']/g, m => ({
                    '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;'
                }[m])) || '';
            }

            showLoading(tool) {
                const resultDiv = document.getElementById(tool === 'user' ? 'result' : `${tool}Result`);
                resultDiv.innerHTML = '<div class="loading">Loading...</div>';
                resultDiv.style.display = 'block';
            }

            showError(tool, message) {
                const resultDiv = document.getElementById(tool === 'user' ? 'result' : `${tool}Result`);
                resultDiv.innerHTML = `<div class="error">${this.escapeHtml(message)}</div>`;
                resultDiv.style.display = 'block';
            }

            updateStats() {
                document.getElementById('totalLookups').textContent = this.totalLookups.toLocaleString();
            }
        }

        // Initialize the application
        const discordTools = new DiscordTools();
    </script>
</body>
</html>
